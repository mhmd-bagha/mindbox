class VideoPlayer{constructor(e){let t={selector:"defaultId",dimensions:{width:"100%"},config:{storage:{captionOffset:!1,playerSpeed:!1,captionSize:!1},controls:{playtime:!0,mute:!0,volume:!0,subtitles:!0,config:!0,fullscreen:!0,submenuCaptions:!0,submenuOffset:!0,submenuSpeed:!0,allowLocalSubtitles:!0},i18n:{play:"(play:pause)",mute:"(silent: with sound)",subtitles:"Subtitle (Enable:Disable)",config:"settings",fullscreen:"(fullscreen:exit) fullscreen",main_topic:"Settings:",main_caption:"Subtitle",main_offset:"subtitle speed",main_speed:"Movie Speed",main_disabled:"disabled",main_default:"Default",caption_topic:"Subtitles:",caption_back:"Back",caption_load:"Load from internal memory",offset_topic:"set title",speed_topic:"speed setting"}},icons:{path:"./icons/"},customEvents:[{type:"",to:"",starttime:"",endtime:"",content:"",position:"",class:""}]};var n=Math.floor(1e4*Math.random())+0;for(var i in void 0==e.config?e.config=t.config:e.config,void 0==e.config.controls?e.config.controls=t.config.controls:e.config.controls,t.config.controls)void 0==e.config.controls[i]?e.config.controls[i]=t.config.controls[i]:e.config.controls[i]=e.config.controls[i];for(var i in void 0==e.config.storage?e.config.storage=t.config.storage:e.config.storage,t.config.storage)void 0==e.config.storage[i]?e.config.storage[i]=t.config.storage[i]:e.config.storage[i]=e.config.storage[i];for(var i in void 0==e.config.i18n?e.config.i18n=t.config.i18n:e.config.i18n,t.config.i18n)void 0==e.config.i18n[i]?e.config.i18n[i]=t.config.i18n[i]:e.config.i18n[i]=e.config.i18n[i];this.selector=e.selector.substring(1)||t.selector.substring(1),this.dimensions=e.dimensions||t.dimensions,this.config=e.config||t.config,this.i18n=e.config.i18n||t.config.i18n,this.icons=e.icons||t.icons,this.customEvents=e.customEvents||t.customEvents,this.element=document.getElementById(this.selector),this.rand_number=n,this.options=e||t,this.events={captions:{name:!1,subtitles:!1},offset:{value:!1}};var s,l,a,o,r,c,d,u,p,m,y,g,f,v,h,b,$,E,_,L,k,I,S,B,x,T,w,C,M=this,A=0,O=0,H=0,F=1,P=0,j=0,z=0,q=0,R=[],D=this.icons,V=this.config,W=this.dimensions,N=this.selector,K=this.customEvents,G=this.mainmenu=[{name:"play_button",element:"<button class='player__button toggle' id='tooglebutton_"+n+"'><img id='player_bplay_"+n+"' src='"+D.path+"play.svg'></button>",opcional:!1,tooltip:this.i18n.play},{name:"progress_bar",element:"<div class='player_cuetime' id='player_cue_timer_"+n+"'>loading...</div><div id='player_player_el_progressbar_"+n+"' class='player_progress player__slider' top:15px;><input type='range' id='range_progress_"+n+"' class='styled-slider slider-progress' min='0' value='0' step='0.01' autocomplete='off' style='width: 100%; cursor:pointer;' /><canvas id='player_buffered_"+n+"' style='position: absolute; bottom: 14px; left: 0; opacity: 0.4;  width: 100%; height:5px;'></canvas></div>",opcional:!1,tooltip:!1},{name:"playtime",element:"<div id='player_el_current_"+n+"' class='player__button player_button_disabled player_currentime'><span id='player_currentime_"+n+"'>00:00</span> / <span id='player_fulltime_"+n+"'></span></div>",opcional:!0,tooltip:!1},{name:"mute",element:"<button id='playergrid_mute_"+n+"' class='player__button'><img id='icon_volume_"+n+"' src='"+D.path+"volume.svg'></button>",opcional:!0,tooltip:this.i18n.mute},{name:"volume",element:"<input type='range' id='playergrid_volume_"+n+"' style='max-width:100px; min-width:50px;' name='volume' class='player_progress_sound' min=0 max='1' step='0.01' value='1'>",opcional:!0,tooltip:!1},{name:"subtitles",element:"<button id='player_subtitle_"+n+"' style='margin-left:5px' class='player__button'><img class='opacity_svg' id='player_subtitle_svg_"+n+"' src='"+D.path+"cc.svg'></button>",opcional:!0,tooltip:this.i18n.subtitles},{name:"config",element:"<button id='player_el_cog_"+n+"' class='player__button'><img src='"+D.path+"cog.svg'></button>",opcional:!0,tooltip:this.i18n.config},{name:"fullscreen",element:"<button id='fullscreen_"+n+"' class='player__button fullscreen_button'><img src='"+D.path+"fullscreen.svg'></button>",opcional:!0,tooltip:this.i18n.fullscreen},{name:"Main Submenu",element:"<div style='display:none;' class='player_submenu menuclosed' id='player_submenu_"+n+"'></div>",opcional:!1,tooltip:!1}],X=this.submenu={mainSubmenu:{mainElement:"<ul id='player_submenu_main_"+n+"'></ul>",parentID:"player_submenu_main_",elements:[{name:"topic",element:"<li class='topic_submenu'>"+this.i18n.main_topic+"</li>",opcional:!1},{name:"submenuCaptions",element:"<li id='this.player_el_topicCaption_"+n+"'><span>"+this.i18n.main_caption+"</span><span class='option_submenu' id='option_submenu_caption_"+n+"'>"+this.i18n.main_disabled+"</span></li>",opcional:!0},{name:"submenuOffset",element:"<li id='player_el_capoffset_"+n+"'><span >"+this.i18n.main_offset+"</span><span class='option_submenu' id='option_submenu_range_"+n+"'>0s</span></li>",opcional:!0},{name:"submenuSpeed",element:"<li id='topic_submenu_speed_"+n+"'><span>"+this.i18n.main_speed+"</span><span class='option_submenu' id='option_submenu_speed_"+n+"'>"+this.i18n.main_default+"</span></li>",opcional:!0}]},captionSubmenu:{mainElement:"<ul style='display:none;' id='player_submenu_captions_"+n+"'><input style='display:none;' type='file' id='localsub_"+n+"'><li class='topic_submenu'>"+this.i18n.caption_topic+"</li><li id='player_el_capback_"+n+"' style='font-weight:bold;'>"+this.i18n.caption_back+"</li></ul>",parentID:"player_submenu_captions_",elements:[{name:"allowLocalSubtitles",element:"<li id='locally_"+n+"' style='font-weight:bold;'>"+this.i18n.caption_load+"</li>",opcional:!0}]},rangeSubmenu:{mainElement:"<ul style='display:none; width:250px;' id='player_range_captions_"+n+"'><li class='topic_submenu'>"+this.i18n.offset_topic+"<output style='position:absolute; right:22px;' id='valoffset_"+n+"'>0</output></li><li class='topic_submenu'><span>-5s</span><span style='float: right;'>+5s</span><input type='range' oninput='valoffset_"+n+".value = offset_range_input_"+n+".value' id='offset_range_input_"+n+"' min='-5' max='5' step='0.2'></li>",parentID:"player_range_captions_"},speedSubmenu:{mainElement:"<ul style='display:none; width:250px;' id='player_range_speed_"+n+"'><li class='topic_submenu'>"+this.i18n.speed_topic+"<output style='position:absolute; right:22px;' id='valoffset_speed_"+n+"'>1</output></li><li class='topic_submenu'><span>0.1x</span><span style='float: right;'>8x</span><input type='range' value='1' oninput='valoffset_speed_"+n+".value = offset_range_speed_"+n+".value' id='offset_range_speed_"+n+"' min='0.1' max='8' step='0.1'></li>",parentID:"player_range_speed_"}};let U=new CustomEvent("captionchange",{detail:this.events.captions,bubbles:!1,cancelable:!1,composed:!1}),Y=new CustomEvent("offsetchange",{detail:this.events.offset,bubbles:!1,cancelable:!1}),J=new CustomEvent("togglecaption",{detail:this.events.captions,bubbles:!1,cancelable:!1});function Q(e,t){var n;return function(){var i=arguments,s=function(){n=!1};n||(e.apply(this,i),n=!0,setTimeout(s,t))}}function Z(e){M.video.currentTime=e,M.player_el_progressbar.value=e}var ee=this.handleCustomEvents=function e(){for(var t=0;t<K.length;t++){let n=K[t].to,i=Math.floor(1e4*Math.random())+0;if(K[t].hasOwnProperty("fired")&&K[t].fired)l.currentTime>K[t].endtime&&(K[t].fired=!1,document.getElementById("player_ce_"+K[t].eventID).remove());else if(l.currentTime>K[t].starttime&&l.currentTime<K[t].endtime){Object.assign(K[t],{fired:!0}),Object.assign(K[t],{eventID:i}),I.insertAdjacentHTML("beforeend","<div id='player_ce_"+i+"' class='player_cevent "+K[t].position+" "+K[t].class+"'>"+K[t].content+"</div>");let s=document.getElementById("player_ce_"+i);switch(K[t].type){case"skip":K[t].to<=l.duration&&!isNaN(K[t].to)&&K[t].to&&s.addEventListener("click",function(){Z(n)});break;case"redirect":K[t].to&&s.addEventListener("click",function(){window.location.href=n});break;case"function":K[t].to&&s.addEventListener("click",function(){n()});break;default:console.log("No action was added to this event")}}}},et=this.handleStorage=function e(t,i,s){switch(t){case"set":localStorage.setItem(i,s);break;case"get":break;case"setStorage":V.storage.captionOffset&&(y.value=localStorage.getItem("captionOffset"),ev()),V.storage.playerSpeed&&(m.value=localStorage.getItem("playerSpeed"),eh()),V.storage.captionSize&&(document.getElementById("caption_track_"+n).style.fontSize=localStorage.getItem("captionSize")+"px")}},en=this.togglePlay=function e(){document.getElementById("poster_layer_"+n).style.backgroundImage="none",!0==l.paused?(l.play(),document.getElementById("player_bplay_"+n).src=D.path+"pause.svg",ea("hide"),e_("play_button",1)):(l.pause(),document.getElementById("player_bplay_"+n).src=D.path+"play.svg",ea("show"),e_("play_button",0))},ei=this.SetFullScreen=function e(t){switch(t){case"toggleFullscreen":b.requestFullscreen?b.requestFullscreen():b.webkitRequestFullscreen?b.webkitRequestFullscreen():b.msRequestFullscreen&&b.msRequestFullscreen(),e_("fullscreen",1),1>=outerHeight-innerHeight&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),e_("fullscreen",0)),eI("CAll");break;case"checkFullscreen":1>=outerHeight-innerHeight?e_("fullscreen",1):e_("fullscreen",0)}};function es(){var e,t,n=o.getContext("2d"),i=M.video.buffered,s=i.length,l=o.width,a=o.height,r=M.video.duration;for(n.clearRect(0,0,l,a),n.fillStyle="#e1e1dd";s--;)e=i.start(s)/r*l,t=i.end(s)/r*l,n.fillRect(e,0,t-e,a);setTimeout(es,500)}function el(){l.focus()}function ea(e){"show"==e?(S.style.display="block",S.classList.remove("posteroff"),S.classList.add("posteron")):"hide"==e&&(S.style.display="none",S.classList.remove("posteron"),S.classList.add("posteroff"))}function eo(){l.currentTime+=parseFloat(this.dataset.skip)}function er(){l[this.name]=this.value}function ec(e,t){switch(t){case"left":var n=l.currentTime;l.currentTime=n-e;var i=T.value;T.value=Number(i)-5;break;case"right":var n=l.currentTime;l.currentTime=n+e;var i=T.value;T.value=Number(i)+5}}function ed(e){return e.offsetX/e.target.clientWidth*parseInt(e.target.getAttribute("max"))}function eu(e){H=ed(e).toFixed(2),h.style.opacity="1",h.style.left=e.offsetX+"px",h.innerHTML=e8(H)}function ep(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function em(){let e=navigator.userAgent;return/android/i.test(e)?"android":/iPad|iPhone|iPod/i.test(e)?"ios":void 0}function e8(e){var t=new Date(1970,0,1);t.setSeconds(e);var n=t.toTimeString().substr(0,8);return e>86399&&(n=Math.floor((t-Date.parse("1/1/70"))/36e5)+n.substr(2)),e<3600&&(n=n.substring(3)),n}function ey(){0==j&&(document.getElementById("player_currentime_"+n).innerHTML=e8(l.currentTime)),l.currentTime>=l.duration&&(l.currentTime=0,T.value=0,en())}function eg(){let e=[".vtt",".srt"],t=e=>new Promise((t,n)=>{let i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=e=>n(e)});new Promise(async function(i,s){let l=document.querySelector("#localsub_"+n).files[0];var a=l.name.substr(l.name.length-4);if(e.includes(a)){document.querySelectorAll("#player_submenu_captions_"+n+" .caption_track").forEach(e=>{e.remove()});let o=await t(l),r=l.name.substring(0,10);document.getElementById(N).insertAdjacentHTML("beforeend","<track label='"+r+"...' format='"+a+"' srclang='Local' src='"+o+"'>"),i()}else alert("Only str Or vtt")}).then(function(){ew()})}var ef=Q(function(){if(es(),!l.paused){var e=T.value;T.value=Number(e)+1}},1e3),ev=this.OffsetChange=function e(){z=document.getElementById("offset_range_input_"+n).value,document.getElementById("option_submenu_range_"+n).innerHTML=z+"s",document.getElementById("valoffset_"+n).value=z,V.storage.captionOffset&&et("set","captionOffset",z),M.events.offset.value=z,M.video.dispatchEvent(Y)},eh=this.SpeedChange=function e(){F=document.getElementById("offset_range_speed_"+n).value,document.getElementById("valoffset_speed_"+n).value=F,1==F?document.getElementById("option_submenu_speed_"+n).innerHTML=M.i18n.main_default:document.getElementById("option_submenu_speed_"+n).innerHTML=F+"x",l.playbackRate=F,V.storage.playerSpeed&&et("set","playerSpeed",F)};function eb(e){if(ep()){var t=document.getElementById("range_progress_"+n).value;if(void 0==t){let i=(t=e.touches[0].clientX)/$.offsetWidth*l.duration;i>=l.duration&&(i=l.duration),l.currentTime=i}else l.currentTime=t}else{var t=e.offsetX;let s=t/$.offsetWidth*l.duration;s>=l.duration&&(s=l.duration),l.currentTime=s}}function e$(e){l.volume=p.value,et("set","scrubsound",l.volume),ek("checkMute")}function eE(e){"close"==e?0==q&&!1==l.paused&&(eI("CAll"),document.getElementById("player__controls_"+n).style.opacity=0,document.getElementById("caption_track_"+n).style.marginBottom="0px"):"open"==e&&1==O&&(document.getElementById("caption_track_"+n).style.marginBottom="40px",document.getElementById("player__controls_"+n).style.opacity=1)}var e_=M.ChangeTooltip=function e(t,n){let i=M.tooltips_menu[t].element;for(var l=0,a=0;a<M.mainmenu.length;a++)M.mainmenu[a].name==t&&(l=M.mainmenu[a].tooltip);if(l.indexOf("(")>-1){s=l.substring(l.lastIndexOf("(")+1,l.lastIndexOf(")")).split(":");var o=l.replace(/\(.*\)/,"");o=o.replace(" ","");var r=s[n]+" "+o}r&&(i.innerText=r);let c=i.offsetWidth/2-7;if(i.style.marginLeft="-"+c+"px",i.offsetLeft+i.offsetWidth>=M.player_el_controlbar.offsetWidth){let d=i.offsetLeft+i.offsetWidth-M.player_el_controlbar.offsetWidth;d=c+d+5,i.style.marginLeft="-"+d+"px"}i.offsetLeft<=0&&(i.style.marginLeft="-19px")},eL=this.ActivateSubtitles=function e(){1==P?0==A?(A=1,document.getElementById("player_subtitle_svg_"+n).classList.remove("opacity_svg"),e_("subtitles",1),M.events.captions.subtitles=!0):1==A&&(A=0,document.getElementById("player_subtitle_svg_"+n).classList.add("opacity_svg"),e_("subtitles",0),M.events.captions.subtitles=!1):console.log("You must choose an Subtitle first."),M.video.dispatchEvent(J)},ek=this.checkSoundLevel=function e(t){switch(t){case"checkMute":l.muted||0==l.volume?(l.muted=!1,p.value=localStorage.getItem("scrubsound"),l.volume=localStorage.getItem("scrubsound"),document.getElementById("icon_volume_"+n).src=D.path+"mute.svg",e_("mute",1)):(document.getElementById("icon_volume_"+n).src=D.path+"volume.svg",e_("mute",0));break;case"toogleMute":!0==l.muted?e("unmutePlayer"):e("mutePlayer");break;case"checkStorage":localStorage.getItem("scrubsound")?(p.value=localStorage.getItem("scrubsound"),l.volume=localStorage.getItem("scrubsound")):(p.value="1",l.muted=!1,et("set","scrubsound",1)),e("checkMute");break;case"mutePlayer":l.muted=!0,l.volume=0,document.getElementById("icon_volume_"+n).src=D.path+"mute.svg",document.getElementById("playergrid_volume_"+n).value="0",e_("mute",1);break;case"unmutePlayer":l.muted=!1,e("checkMute"),localStorage.getItem("scrubsound")?p.value=localStorage.getItem("scrubsound"):p.value="1",e_("mute",0),0!=l.volume&&(document.getElementById("icon_volume_"+n).src=D.path+"volume.svg")}},eI=this.Submenu=function e(t){switch(t){case"toggleSubmenu":C.style.display="block",w.style.display="none",v.style.display="none",g.style.display="none",B.classList.contains("menuclosed")?(B.style.display="block",B.classList.add("menuopen"),B.classList.remove("menuclosed"),q=1):(B.style.display="none",B.classList.add("menuclosed"),B.classList.remove("menuopen"),q=0);break;case"CAll":C.style.display="none",w.style.display="none",v.style.display="none",g.style.display="none",B.classList.add("menuclosed"),q=0;break;case"OCaption":C.style.display="none",w.style.display="block";break;case"CCaption":C.style.display="block",w.style.display="none";break;case"OSpeed":C.style.display="none",document.getElementById("player_range_speed_"+n).style.display="block";break;case"ORange":C.style.display="none",document.getElementById("player_range_captions_"+n).style.display="block"}},eS=this.TransformPlayer=function e(t){I.offsetWidth<=460?(j=1,document.getElementById("player_el_current_"+n).style.display="none",document.getElementById("player_player_el_progressbar_"+n).classList.add("responsive_bar"),h.classList.add("player_cuetime_small")):(j=0,document.getElementById("player_el_current_"+n).style.display="block",document.getElementById("player_player_el_progressbar_"+n).classList.remove("responsive_bar"),document.getElementById("player_fulltime_"+n).innerHTML=e8(l.duration),h.classList.remove("player_cuetime_small"))},eB=this.SetCaptionSize=function e(t){let i=document.getElementById("caption_track_"+n);var s=window.getComputedStyle(i).fontSize;if(t)"sizeUp"==t?(s=Number(s=s.slice(0,-2))+Number(1),i.style.fontSize=s+"px"):"sizeDown"==t&&(s=Number(s=s.slice(0,-2))-Number(1),i.style.fontSize=s+"px"),V.storage.captionSize&&et("set","captionSize",s);else{var l=.1*I.offsetWidth;i.style.fontSize=l+"%",i.style.lineHeight=l/3+"px"}},ex=this.PlayCaption=function e(t){function i(e){var t=function(e,t){return("000"+e).slice(-1*t)},n=parseFloat(e).toFixed(3),i=Math.floor(n/60)%60,s=n.slice(-3);return t(Math.floor(n/60/60),2)+":"+t(i,2)+":"+t(Math.floor(n-60*i),2)+"."+t(s,3)}function a(){for(var e=1;e<R.length;e++)if(void 0!=R[e].starttime&&void 0!=R[e].endtime){var t=R[e].starttime,s=R[e].endtime;if(z>=0)var a=l.currentTime-z;else var o=String(z).substring(1),a=l.currentTime+Number(o);(a=i(a))>=t&&a<=s&&1==A&&(void 0!=R[e].text2?document.getElementById("caption_track_"+n).innerHTML=R[e].text1+"<br>"+R[e].text2:document.getElementById("caption_track_"+n).innerHTML=R[e].text1),a>s&&(document.getElementById("caption_track_"+n).innerHTML="")}}R=[];var o=new XMLHttpRequest;if(o.open("GET",t.attributes.src.nodeValue,!0),t.attributes.format)var r=t.attributes.src.nodeValue+t.attributes.format.nodeValue;else var r=t.attributes.src.nodeValue;M.events.captions.name=t.attributes.label.nodeValue,o.onload=function(){if(this.status>=200&&this.status<400){var e=this.response;e=e.replace(/(\r\n|\r|\n)/g,"\n");var t=r.substr(r.length-4);".srt"==t&&(e="STR\n\n"+e),e.split("\n\n").map(function(e){if(void 0!=(s=e.split("\n"))[1]){if(isNaN(s[0])){var n=s[0].replace(/-/g,""),i=n;if(i=i.replace(/ /g,"")){".srt"==t&&(n=s[0].replace(/,/g,"."));var l=n.substr(0,n.indexOf(">"));l=l.replace(/ /g,"");var a=n.split(">",2);a=a[1].replace(/ /g,""),l=l.replace(/--/g,""),a=a.replace(/--/g,""),".srt"==t&&(a=a.replace(/,/g,"."),l=l.replace(/,/g,".")),R.push({starttime:l,endtime:a,text1:s[1],text2:s[2]})}}else{var n=s[1].replace(/-/g,""),i=n;if(i=i.replace(/ /g,"")){var l=n.substr(0,n.indexOf(">"));l=l.replace(/ /g,"");var a=n.split(">",2);a=a[1].replace(/ /g,""),".srt"==t&&(a=a.replace(/,/g,"."),l=l.replace(/,/g,".")),R.push({starttime:l,endtime:a,text1:s[2],text2:s[3]})}}}else R.push({starttime:void 0,endtime:void 0,text1:void 0,text2:void 0})})}},o.send(),l.addEventListener("timeupdate",a,!0),1==P?l.removeEventListener("timeupdate",a,!0):(P=1,eL()),M.video.dispatchEvent(U)},eT=this.SetCaptions=function e(t){let i=t.attributes.src.nodeValue.substr(t.attributes.src.nodeValue.length-4),s=t.track.label;var l=Math.floor(1e4*Math.random())+0;t.attributes.format&&(i=t.attributes.format.nodeValue),w.insertAdjacentHTML("beforeend","<li class='caption_track' id='captionid_"+l+"'><span>"+s+"</span><span class='labelformat'>"+i+"</span></li>"),document.getElementById("captionid_"+l).addEventListener("click",function(){ex(t),document.getElementById("option_submenu_caption_"+n).innerHTML=s,eI("toggleSubmenu")})},ew=this.GetCaptions=function e(){for(var t=document.getElementById(M.selector).getElementsByTagName("track"),n=0;n<t.length;n++)M.SetCaptions(t[n])},eC=this.Keybinds=function e(){let t={keycode_32(){en()},keycode_75(){en()},keycode_70(){ei("toggleFullscreen")},keycode_39(){ec(5,"right")},keycode_37(){ec(5,"left")},keycode_77(){ek("toogleMute")},keycode_67(){eL()},keycode_shift87(){eB("sizeUp")},keycode_shift83(){eB("sizeDown")}};l.addEventListener("keydown",function(e){let n;(32==e.keyCode||e.shiftKey&&87==e.keyCode||e.shiftKey&&83==e.keyCode)&&e.preventDefault(),(n=e.shiftKey?t["keycode_shift"+e.keyCode]:t["keycode_"+e.keyCode])&&n()})},e6=this.SetupLogic=function e(){if(l=(b=document.querySelector("#player__video_"+n)).querySelector("#player_vid_"+n),this.video=l,l.addEventListener("loadedmetadata",e=>{this.medialoading.style.display="none",x.style.opacity=1,O=1,T.setAttribute("max",l.duration),0==j&&(document.getElementById("player_fulltime_"+n).innerHTML=e8(l.duration)),es(),et("setStorage"),ek("checkStorage")}),l.addEventListener("timeupdate",ef),l.addEventListener("timeupdate",ey),l.addEventListener("timeupdate",ee),b.addEventListener("click",el),(L=b.querySelector(".fullscreen_button")).addEventListener("click",function(){ei("toggleFullscreen")},!0),document.addEventListener("fullscreenchange",function(){ei("checkFullscreen")},!0),(E=b.querySelector(".toggle")).addEventListener("click",en),(_=b.querySelectorAll(".player__slider")).forEach(e=>e.addEventListener("change",er)),this.player_el_rangeinput.addEventListener("change",ev),this.player_el_speedinput.addEventListener("change",eh),p=document.getElementById("playergrid_volume_"+n),document.getElementById("playergrid_mute_"+n).addEventListener("click",function(){ek("toogleMute")},!1),$=b.querySelector(".player_progress"),this.control_buttons.config.addEventListener("click",function(){eI("toggleSubmenu")},!0),this.player_el_topicCaption.addEventListener("click",function(){eI("OCaption")},!0),this.player_el_topicSpeed.addEventListener("click",function(){eI("OSpeed")},!0),this.player_el_capback.addEventListener("click",function(){eI("CCaption")},!0),this.control_buttons.subtitles.addEventListener("click",eL),I.addEventListener("mouseleave",function(){eI("CAll")},!1),this.player_el_capoffset.addEventListener("click",function(){eI("ORange")},!0),ep()){"ios"==em()&&(this.player_el_volume.style.display="none",L.style.display="none",l.style.transformStyle="preserve-3d"),T.addEventListener("touchmove",function(e){eb(e),l.pause()}),T.addEventListener("change",function(e){eb(e),l.pause()||en(),ea("hide")},!1),S.addEventListener("touchend",function(e){l.pause()||en()}),p.addEventListener("touchmove",function(e){e$(e)}),p.addEventListener("change",function(e){e$(e)},!1),u.style.display="none";var t=null;I.addEventListener("touchstart",e=>{clearTimeout(t),eE("open"),t=setTimeout(function(){eE("close")},4e3)}),I.addEventListener("touchmove",e=>{clearTimeout(t)}),I.addEventListener("touchend",e=>{clearTimeout(t),t=setTimeout(function(){eE("close")},4e3)})}else{let i=!1;$.addEventListener("click",eb),$.addEventListener("mousemove",e=>i&&eb(e)),p.addEventListener("click",e$);let s=!1;p.addEventListener("mousemove",e=>s&&e$(e)),p.addEventListener("mousedown",()=>s=!0),p.addEventListener("mouseup",()=>s=!1),(S=b.querySelector("#poster_layer_"+n)).addEventListener("click",en),l.addEventListener("click",en),u.addEventListener("click",function(){f.click()},!0),f.addEventListener("change",eg),document.getElementById("range_progress_"+n).addEventListener("mousemove",function(e){eu(e)}),document.getElementById("range_progress_"+n).addEventListener("mouseleave",function(e){h.style.opacity=0}),$.addEventListener("mousedown",()=>i=!0),$.addEventListener("mouseup",()=>i=!1),x.addEventListener("mouseover",e=>{q=1}),x.addEventListener("mouseleave",e=>{q=0}),T.addEventListener("input",function(e){l.pause()},!1),T.addEventListener("change",function(e){en(),ea("hide")},!1),eE("close");var t=null;I.addEventListener("mousemove",e=>{clearTimeout(t),eE("open"),t=setTimeout(function(){eE("close")},2e3)}),I.addEventListener("mouseleave",e=>{clearTimeout(t),eE("close")})}},eM=this.SetupMenu=function e(){for(var t=0;t<G.length;t++)void 0!=this.config.controls[G[t].name]&&!0==this.config.controls[G[t].name]||!1==G[t].opcional?x.insertAdjacentHTML("beforeend",G[t].element):x.insertAdjacentHTML("beforeend","<div style='display:none;'>"+G[t].element+"</div>");for(var i=this.tooltips_menu=[],t=0;t<G.length;t++)if(G[t].tooltip){let s=new DOMParser().parseFromString(G[t].element,"text/html");document.getElementById(s.body.firstChild.id).insertAdjacentHTML("beforeend","<div id='player_"+G[t].name+"_tooltip_"+n+"' class='player_tooltip'>"+G[t].tooltip+"</div>"),document.getElementById(s.body.firstChild.id);let l=document.getElementById("player_"+G[t].name+"_tooltip_"+n);i[G[t].name]={element:l},this.ChangeTooltip(G[t].name,0)}for(let p in B=document.getElementById("player_submenu_"+n),X)if(B.insertAdjacentHTML("beforeend",X[p].mainElement),X[p].hasOwnProperty("elements"))for(var t=0;t<X[p].elements.length;t++)void 0!=this.config.controls[X[p].elements[t].name]&&!0==this.config.controls[X[p].elements[t].name]||!1==X[p].elements[t].opcional?document.getElementById(X[p].parentID+n).insertAdjacentHTML("beforeend",X[p].elements[t].element):document.getElementById(X[p].parentID+n).insertAdjacentHTML("beforeend","<div style='display:none;'>"+X[p].elements[t].element);T=document.getElementById("range_progress_"+n),w=document.getElementById("player_submenu_captions_"+n),g=document.getElementById("player_range_captions_"+n),v=document.getElementById("player_range_speed_"+n),this.player_el_topicCaption=document.getElementById("this.player_el_topicCaption_"+n),this.player_el_topicSpeed=document.getElementById("topic_submenu_speed_"+n),this.player_el_capback=document.getElementById("player_el_capback_"+n),this.player_el_capoffset=document.getElementById("player_el_capoffset_"+n),this.player_el_speedinput=m=document.getElementById("offset_range_speed_"+n),this.player_el_rangeinput=y=document.getElementById("offset_range_input_"+n),this.player_el_progressbar=T,this.player_el_volume=k=document.getElementById("playergrid_volume_"+n),this.player_el_cuetimer=h=document.getElementById("player_cue_timer_"+n),this.player_el_submenuBase=B,this.player_el_localsub=f=document.getElementById("localsub_"+n),this.player_el_locally=u=document.getElementById("locally_"+n),this.player_el_submain=C=document.getElementById("player_submenu_main_"+n),this.player_el_buffered=o=document.getElementById("player_buffered_"+n),this.control_buttons={play:this.player_el_play=a=document.getElementById("tooglebutton_"+n),mute:this.player_el_mute=r=document.getElementById("playergrid_mute_"+n),subtitles:this.player_el_subtitles=c=document.getElementById("player_subtitle_"+n),config:this.player_el_cog=document.getElementById("player_el_cog_"+n),fullscreen:this.player_el_fullscreen=d=document.getElementById("fullscreen_"+n)}},eA=this.SetupPlayer=function e(){var t=this.element.getAttribute("src");null==t&&void 0!=this.element.getElementsByTagName("source")[0]?t=this.element.getElementsByTagName("source")[0].src:console.log("No video source found. Read documentation to a add video source dynamically.");var i=document.getElementById(this.selector).getAttribute("poster");this.element.style.display="none",this.element.insertAdjacentHTML("afterend","<div style='width:"+W.width+"' id='player__video_"+n+"' class='player'></div>"),this.player_el_video=I=document.getElementById("player__video_"+n),I.insertAdjacentHTML("beforeend","<video tabindex='1' id='player_vid_"+n+"' preload='auto' class='player__video viewer' style='width:100%; height:100%;' src='"+t+"' playsinline></video>"),I.insertAdjacentHTML("beforeend","<div style='opacity:0;' id='player__controls_"+n+"' class='player_controls'></div>"),this.player_el_controlbar=x=document.getElementById("player__controls_"+n),I.insertAdjacentHTML("afterbegin","<div id='medialoading_"+n+"' class='loadingv'><div class='box-loading animated fadeIn'><div class='player_bg'></div></div></div><div class='poster_layer posteron' id='poster_layer_"+n+"'></div>"),this.medialoading=document.getElementById("medialoading_"+n),this.player_el_poster=S=document.getElementById("poster_layer_"+n),S.insertAdjacentHTML("afterbegin","<div class='poster_center' id='poster_center_"+n+"' style=''></div>"),document.getElementById("poster_center_"+n).insertAdjacentHTML("afterbegin","<div class='poster_button'><img src='"+D.path+"play.svg' style='width: 24px; position: relative; left: 3px;'></div>"),null!=i&&(S.style.backgroundImage="url("+i+")",S.style.backgroundSize="100%",S.style.backgroundPositionY="center"),I.insertAdjacentHTML("beforeend","<div class='player_captionspot caption_size'><p class='player_caption' id='caption_track_"+n+"'></p></div>"),this.SetupMenu(),this.SetupLogic(),this.GetCaptions(),this.Keybinds(),eB(),eS()};this.SetupPlayer();var eO=Q(function(){eB(),eS()},100);window.addEventListener("resize",eO)}togglePlay(){this.togglePlay()}toggleSubtitles(){this.ActivateSubtitles()}toggleFullscreen(){this.SetFullScreen("toggleFullscreen")}destroy(){this.player_el_video.remove()}build(){this.SetupPlayer()}addTrack(e){if(e.options&&"object"==typeof e.options){for(var t,n,i,s,l=Object.keys(e.options).length,a=0;a<l;a++)n=e.options[a].label?"label='"+e.options[a].label+"'":"label='New Subtitle'",i=e.options[a].srclang?"srclang='"+e.options[a].srclang+"'":"srclang='New'",(s=e.options[a].src?"src='"+e.options[a].src+"'":"")?document.getElementById(this.selector).insertAdjacentHTML("beforeend","<track "+n+" "+i+" "+s+">"):console.log("Error, 'src' can not be empty.");document.querySelectorAll("#player_submenu_captions_"+this.rand_number+" .caption_track").forEach(e=>{e.remove()}),this.GetCaptions(),"function"==typeof e.onComplete&&"function"==typeof(t=e.onComplete)&&t()}else console.error("Options must be and Object. Read documentation.")}change(e){if(e.video&&"object"==typeof e.video){if(e.video.videoSrc&&(this.video.pause(),this.video.src=e.video.videoSrc),e.video.posterSrc&&(this.element.setAttribute("poster",e.video.posterSrc),this.player_el_poster.style.backgroundImage="url("+e.video.posterSrc+")"),e.captions&&"object"==typeof e.captions&&e.captions.clearCaptions&&document.querySelectorAll("#player_submenu_captions_"+this.rand_number+" .caption_track").forEach(e=>{e.remove()}),"function"==typeof e.onComplete){var t;"function"==typeof(t=e.onComplete)&&t()}}else console.error("Options must be and Object. Read documentation.")}get playerElement(){return this.video}get playing(){return Boolean(this.video.ready&&!this.video.paused&&!this.video.ended)}get paused(){return Boolean(this.video.paused)}get stopped(){return Boolean(this.video.paused&&0===this.video.currentTime)}get ended(){return Boolean(this.video.ended)}get duration(){let e=parseFloat(this.video.duration),t=(this.video.media||{}).duration;return e||(t||t===1/0?0:t)}get seeking(){return Boolean(this.video.seeking)}get currentTime(){return Number(this.video.currentTime)}get volume(){return this.video.volume}get muted(){return Boolean(this.video.muted)}get speed(){return Number(this.video.playbackRate)}get minimumSpeed(){return .1}get maximumSpeed(){return 8}get minimumOffset(){return -5}get maximumOffset(){return 5}get source(){return this.video.currentSrc}get captionOffset(){return this.player_el_rangeinput.value}set currentTime(e){this.video.currentTime=e,this.player_el_progressbar.value=e}set volume(e){this.video.volume=e,this.player_el_volume.value=e,this.checkSoundLevel("checkMute")}set speed(e){if(e<-.1||e>8)return"Value must be between -0.1 and 8";this.video.playbackRate=e,this.player_el_speedinput.value=e,this.SpeedChange()}set captionOffset(e){if(e<-5||e>5)return"Value must be between -5 and 5";this.player_el_rangeinput.value=e,this.OffsetChange()}set source(e){this.video.pause(),this.video.src=e,this.video.play()}set muted(e){e?this.checkSoundLevel("mutePlayer"):this.checkSoundLevel("unmutePlayer")}}try{module.exports=exports=player}catch(e){}